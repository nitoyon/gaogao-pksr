<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ワールド破壊兵器</title>
    <style>
        body { font-family: system-ui, -apple-system, "Segoe UI", Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic UI", "Meiryo", sans-serif; line-height: 1.6; padding: 24px; }
        h1 { font-size: 1.2rem; margin: 0 0 12px; }
        .controls { display: grid; grid-template-columns: repeat(5, minmax(50px, 1fr)); gap: 10px; max-width: 520px; margin-top: 10px; }
        .controls input { font-size: 16px; text-align: center; padding: 8px 6px; border: 1px solid #ddd; border-radius: 8px; }
        .row { display: flex; gap: 12px; align-items: center; margin-top: 10px; flex-wrap: wrap; }
        .row label { display: flex; align-items: center; gap: 6px; }
        .summary { margin-top: 12px; color: #555; }
        .flex { display: flex; flex-direction:column; flex-wrap: wrap; align-items: stretch; margin-top:14px; }
        .box { min-width: 280px; }
        textarea { width: 100%; min-height: 96px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; }
        .min-textarea{ min-height:1rem }
        .list { margin-top: 12px; display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 8px; }
        .chip { border: 1px solid #eee; border-radius: 999px; padding: 6px 10px; text-align: center; background: #fafafa; }
        .muted { color: #888; }
        .small { font-size: 0.9rem; }
        .note { font-size:12px; margin-top: 4px; color: #777; }

        .heads{}
        button.clear {padding: 6px 10px; border: 1px solid #ddd; background: #dedede; border-radius: 8px; cursor: pointer; }
        button.clear:hover { background: #f5f5f5; }

        #freq { margin-top: 6px; }
        #freq .chip { display:inline-block; margin: 2px 4px 0 0; }

        /* リンクの見た目（青文字＆下線なし、hoverで下線のみ） */
        .chip a:link,
        .chip a:visited {
            color: inherit;
            text-decoration: none;
        }

        .chip a:hover {
            text-decoration: underline;
        }

        /* 任意：キーボード操作時も視覚的にわかるように */
        .chip a:focus-visible {
            outline: none;
            text-decoration: underline;
        }
    </style>
</head>
<body>
<h1>ワールド破壊兵器</h1>

<div class="heads">
    <button class="clear" id="clearBtn" type="button">クリア</button>
</div>

<!-- 5つの枠：位置指定 -->
<div class="controls" id="posInputs">
    <input type="text" maxlength="1" placeholder="1文字目" aria-label="1文字目">
    <input type="text" maxlength="1" placeholder="2文字目" aria-label="2文字目">
    <input type="text" maxlength="1" placeholder="3文字目" aria-label="3文字目">
    <input type="text" maxlength="1" placeholder="4文字目" aria-label="4文字目">
    <input type="text" maxlength="1" placeholder="5文字目" aria-label="5文字目">
</div>

<!-- デフォルトON（非表示設定） -->
<div class="row" style="display:none">
    <label class="small"><input type="checkbox" id="only5" checked> 5文字だけに限定</label>
    <label class="small"><input type="checkbox" id="caseFold" checked> ひらカナ同一視（か=カ）</label>
</div>

<div class="note small muted">例：真ん中を「リ」にしたい場合は 3 文字目に「リ」。</div>

<div class="flex">
    <div class="box">
        <label for="banArea"><strong>使わない文字列</strong></label>
        <textarea id="banArea" placeholder="ここに入力した各文字を含む語は除外されます。例）ラフレシア → ラ／フ／レ／シ／アを禁止"></textarea>
    </div>

    <div class="box">
        <label for="includeArea"><strong>使う文字</strong></label>
        <textarea id="includeArea" class="min-textarea" placeholder="ここに入力した各文字をすべて含む語のみ表示。例）リカ → リとカを両方含む語"></textarea>
        <div class="note small muted">空白は無視・重複は自動でまとめます。</div>
    </div>
</div>

<div class="summary small" id="summary"></div>

<!-- ▼ 追加：頻出文字の表示枠（summaryの直後あたりに置く） -->
<div class="small muted" id="freq"></div>

<div class="list" id="resultList"></div>

<script>
  const data = [
    "フシギダネ","フシギソウ","フシギバナ","リザードン","カメックス","キャタピー","トランセル","バタフリー","ピジョット","オニスズメ","オニドリル","アーボック","ピカチュウ","ライチュウ","サンドパン","ニドラン♀","ニドリーナ","ニドクイン","ニドラン♂","ニドリーノ","ニドキング","キュウコン","ゴルバット","ナゾノクサ","クサイハナ","ラフレシア","パラセクト","モルフォン","ダグトリオ","ペルシアン","ゴルダック","オコリザル","ウインディ","ニョロボン","ユンゲラー","フーディン","ワンリキー","ゴーリキー","カイリキー","マダツボミ","ウツボット","メノクラゲ","ドククラゲ","イシツブテ","ゴローニャ","ギャロップ","レアコイル","ドードリオ","ベトベター","ベトベトン","シェルダー","パルシェン","スリーパー","キングラー","ビリリダマ","マルマイン","サワムラー","エビワラー","ベロリンガ","マタドガス","サイホーン","モンジャラ","トサキント","アズマオウ","ヒトデマン","スターミー","バリヤード","ストライク","ルージュラ","ケンタロス","コイキング","ギャラドス","シャワーズ","サンダース","ブースター","オムナイト","オムスター","カブトプス","メガプテラ","フリーザー","ファイヤー","ミニリュウ","ハクリュー","カイリュー","ミュウツー","チコリータ","ベイリーフ","メガニウム","ヒノアラシ","マグマラシ","バクフーン","アリゲイツ","オーダイル","ヨルノズク","レディアン","アリアドス","クロバット","チョンチー","ランターン","トゲチック","ネイティオ","デンリュウ","キレイハナ","ウソッキー","ニョロトノ","ヒマナッツ","ヤンヤンマ","ブラッキー","ヤミカラス","ヤドキング","アンノーン","ソーナンス","キリンリキ","クヌギダマ","フォレトス","グライガー","ハガネール","グランブル","ハリーセン","ヘラクロス","マグマッグ","マグカルゴ","テッポウオ","デリバード","マンタイン","エアームド","キングドラ","ドンファン","ポリゴン2","カポエラー","ムチュール","エレキッド","ミルタンク","ヨーギラス","サナギラス","バンギラス","ジュプトル","ジュカイン","ワカシャモ","バシャーモ","ミズゴロウ","ヌマクロー","ラグラージ","ジグザグマ","マッスグマ","カラサリス","アゲハント","ドクケイル","ハスブレロ","ルンパッパ","ダーテング","オオスバメ","ペリッパー","サーナイト","アメモース","キノガッサ","ヤルキモノ","ケッキング","テッカニン","ゴニョニョ","バクオング","マクノシタ","ハリテヤマ","エネコロロ","ボスゴドラ","チャーレム","ライボルト","バルビート","イルミーゼ","マルノーム","サメハダー","ホエルオー","ブーピッグ","パッチール","ナックラー","ビブラーバ","フライゴン","チルタリス","ザングース","ハブネーク","ルナトーン","ソルロック","ドジョッチ","シザリガー","ネンドール","ユレイドル","アーマルド","ミロカロス","カクレオン","カゲボウズ","ジュペッタ","サマヨール","トロピウス","ユキワラシ","オニゴーリ","タマザラシ","トドグラー","トドゼルガ","ハンテール","サクラビス","ジーランス","ボーマンダ","メタグロス","レジロック","レジアイス","レジスチル","ラティアス","カイオーガ","グラードン","レックウザ","デオキシス","ハヤシガメ","ドダイトス","モウカザル","ゴウカザル","ポッチャマ","ポッタイシ","エンペルト","ムクバード","ムクホーク","コロボーシ","コロトック","レントラー","ロズレイド","ズガイドス","ラムパルド","タテトプス","トリデプス","ミノムッチ","ミノマダム","ガーメイル","ミツハニー","ビークイン","フローゼル","チェリンボ","カラナクシ","トリトドン","エテボース","フワライド","ミミロップ","ムウマージ","ドンカラス","ニャルマー","ブニャット","リーシャン","スカンプー","スカタンク","ドーミラー","ドータクン","ガブリアス","ヒポポタス","カバルドン","ドラピオン","グレッグル","ドクロッグ","マスキッパ","ケイコウオ","ネオラント","ユキカブリ","ユキノオー","マニューラ","ジバコイル","ベロベルト","ドサイドン","モジャンボ","エレキブル","ブーバーン","トゲキッス","メガヤンマ","リーフィア","グレイシア","グライオン","ポリゴンZ","エルレイド","ダイノーズ","ヨノワール","ユキメノコ","エムリット","ディアルガ","ヒードラン","レジギガス","ギラティナ","クレセリア","ダークライ","アルセウス","ビクティニ","ツタージャ","ジャノビー","ジャローダ","チャオブー","エンブオー","ミジュマル","フタチマル","ダイケンキ","ミルホッグ","ヨーテリー","ハーデリア","ムーランド","チョロネコ","レパルダス","ヤナッキー","バオッキー","ヒヤッキー","ムシャーナ","ハトーボー","ケンホロウ","ゼブライカ","ギガイアス","ココロモリ","モグリュー","ドリュウズ","ドッコラー","ドテッコツ","ローブシン","ガマゲロゲ","ハハコモリ","ペンドラー","エルフーン","ドレディア","ワルビアル","ダルマッカ","ヒヒダルマ","マラカッチ","イシズマイ","イワパレス","ズルズキン","シンボラー","デスカーン","プロトーガ","アバゴーラ","アーケオス","ヤブクロン","ダストダス","ゾロアーク","チラーミィ","チラチーノ","ゴチルゼル","ランクルス","コアルヒー","バニプッチ","バニリッチ","バイバニラ","メブキジカ","シュバルゴ","タマゲタケ","モロバレル","ブルンゲル","ママンボウ","デンチュラ","テッシード","ナットレイ","ギギギアル","シビシラス","シビビール","シビルドン","ランプラー","シャンデラ","オノノクス","クマシュン","ツンベアー","フリージオ","チョボマキ","アギルダー","コジョフー","コジョンド","クリムガン","キリキザン","バッフロン","ウォーグル","バルチャイ","バルジーナ","クイタラン","アイアント","サザンドラ","ウルガモス","コバルオン","テラキオン","ビリジオン","トルネロス","ボルトロス","ランドロス","ケルディオ","メロエッタ","ゲノセクト","ハリマロン","ハリボーグ","ブリガロン","テールナー","ゲコガシラ","ゲッコウガ","ヒノヤコマ","コフキムシ","コフーライ","カエンジシ","フラエッテ","メェークル","ゴーゴート","ヤンチャム","トリミアン","ニャスパー","ニダンギル","ギルガルド","シュシュプ","フレフワン","ペロッパフ","ペロリーム","マーイーカ","カラマネロ","ガメノデス","ドラミドロ","ウデッポウ","ブロスター","エリキテル","エレザード","ガチゴラス","アマルルガ","ニンフィア","ルチャブル","ヌメルゴン","クレッフィ","オーロット","バケッチャ","パンプジン","カチコール","クレベース","オンバット","オンバーン","ゼルネアス","イベルタル","フクスロー","ニャヒート","ガオガエン","オシャマリ","アシレーヌ","ケララッパ","ドデカバシ","ヤングース","デカグース","アゴジムシ","デンヂムシ","クワガノン","マケンカニ","ケケンカニ","オドリドリ","アブリボン","ルガルガン","ドヒドイデ","ドロバンコ","バンバドロ","ラランテス","マシェード","ヤトウモリ","ヌイコグマ","キテルグマ","アママイコ","アマージョ","キュワワー","コソクムシ","シロデスナ","ナマコブシ","ネッコアラ","バクガメス","トゲデマル","ミミッキュ","ハギギシリ","ジジーロン","ジャランゴ","コスモッグ","コスモウム","ソルガレオ","ルナアーラ","ウツロイド","テッカグヤ","カミツルギ","ネクロズマ","アーゴヨン","ズガドーン","メルメタル","バチンキー","ラビフット","ジメレオン","ホシガリス","ヨクバリス","アオガラス","サッチムシ","レドームシ","ワタシラガ","カジリガメ","パルスワン","トロッゴン","カジッチュ","タルップル","サダイジャ","サシカマス","マルヤクデ","オトスパス","ポットデス","ブリムオン","オーロンゲ","サニゴーン","バリコオル","デスバーン","マホイップ","タイレーツ","バチンウニ","コオリッポ","イエッサン","ドラメシヤ","ドラパルト","ザマゼンタ","ウーラオス","レジエレキ","レジドラゴ","ブリザポス","レイスポス","イダイトウ","ハリーマン","ラブトロス","ニャローテ","アチゲータ","ウェルカモ","ワナイダー","マメバッタ","パーモット","パピモッチ","オリーニョ","オリーヴァ","イキリンコ","ハラバリー","タギングル","ノノクラゲ","リククラゲ","カプサイジ","カヌチャン","ウミトリオ","オトシドリ","ナミイルカ","イルカマン","モトトカゲ","キラフロル","ハカドッグ","カラミンゴ","アルクジラ","ハルクジラ","ミガルーサ","シャリタツ","コノヨザル","リキキリン","ノココッチ","ドドゲザン","セグレイブ","コレクレー","サーフゴー","パオジアン","ディンルー","コライドン","ミライドン","カミッチュ","ヤバソチャ","イイネイヌ","マシマシラ","キチキギス","オーガポン","テラパゴス","モモワロウ"
  ];

  const posInputs = [...document.querySelectorAll('#posInputs input')];
  const only5 = document.getElementById('only5');
  const caseFold = document.getElementById('caseFold');
  const banArea = document.getElementById('banArea');
  const includeArea = document.getElementById('includeArea');
  const resultList = document.getElementById('resultList');
  const summary = document.getElementById('summary');
  const clearBtn = document.getElementById('clearBtn');

  // 図鑑番号マップ
  const dexByName = {
    "フシギダネ":1,"フシギソウ":2,"フシギバナ":3,"ヒトカゲ":4,"リザード":5,"リザードン":6,"ゼニガメ":7,"カメール":8,"カメックス":9,"キャタピー":10,"トランセル":11,"バタフリー":12,"ビードル":13,"コクーン":14,"スピアー":15,"ポッポ":16,"ピジョン":17,"ピジョット":18,"コラッタ":19,"ラッタ":20,"オニスズメ":21,"オニドリル":22,"アーボ":23,"アーボック":24,"ピカチュウ":25,"ライチュウ":26,"サンド":27,"サンドパン":28,"ニドラン♀":29,"ニドリーナ":30,"ニドクイン":31,"ニドラン♂":32,"ニドリーノ":33,"ニドキング":34,"ピッピ":35,"ピクシー":36,"ロコン":37,"キュウコン":38,"プリン":39,"プクリン":40,"ズバット":41,"ゴルバット":42,"ナゾノクサ":43,"クサイハナ":44,"ラフレシア":45,"パラス":46,"パラセクト":47,"コンパン":48,"モルフォン":49,"ディグダ":50,"ダグトリオ":51,"ニャース":52,"ペルシアン":53,"コダック":54,"ゴルダック":55,"マンキー":56,"オコリザル":57,"ガーディ":58,"ウインディ":59,"ニョロモ":60,"ニョロゾ":61,"ニョロボン":62,"ケーシィ":63,"ユンゲラー":64,"フーディン":65,"ワンリキー":66,"ゴーリキー":67,"カイリキー":68,"マダツボミ":69,"ウツドン":70,"ウツボット":71,"メノクラゲ":72,"ドククラゲ":73,"イシツブテ":74,"ゴローン":75,"ゴローニャ":76,"ポニータ":77,"ギャロップ":78,"ヤドン":79,"ヤドラン":80,"コイル":81,"レアコイル":82,"カモネギ":83,"ドードー":84,"ドードリオ":85,"パウワウ":86,"ジュゴン":87,"ベトベター":88,"ベトベトン":89,"シェルダー":90,"パルシェン":91,"ゴース":92,"ゴースト":93,"ゲンガー":94,"イワーク":95,"スリープ":96,"スリーパー":97,"クラブ":98,"キングラー":99,"ビリリダマ":100,"マルマイン":101,"タマタマ":102,"ナッシー":103,"カラカラ":104,"ガラガラ":105,"サワムラー":106,"エビワラー":107,"ベロリンガ":108,"ドガース":109,"マタドガス":110,"サイホーン":111,"サイドン":112,"ラッキー":113,"モンジャラ":114,"ガルーラ":115,"タッツー":116,"シードラ":117,"トサキント":118,"アズマオウ":119,"ヒトデマン":120,"スターミー":121,"バリヤード":122,"ストライク":123,"ルージュラ":124,"エレブー":125,"ブーバー":126,"カイロス":127,"ケンタロス":128,"コイキング":129,"ギャラドス":130,"ラプラス":131,"メタモン":132,"イーブイ":133,"シャワーズ":134,"サンダース":135,"ブースター":136,"ポリゴン":137,"オムナイト":138,"オムスター":139,"カブト":140,"カブトプス":141,"プテラ":142,"カビゴン":143,"フリーザー":144,"サンダー":145,"ファイヤー":146,"ミニリュウ":147,"ハクリュー":148,"カイリュー":149,"ミュウツー":150,"ミュウ":151,"チコリータ":152,"ベイリーフ":153,"メガニウム":154,"ヒノアラシ":155,"マグマラシ":156,"バクフーン":157,"ワニノコ":158,"アリゲイツ":159,"オーダイル":160,"オタチ":161,"オオタチ":162,"ホーホー":163,"ヨルノズク":164,"レディバ":165,"レディアン":166,"イトマル":167,"アリアドス":168,"クロバット":169,"チョンチー":170,"ランターン":171,"ピチュー":172,"ピィ":173,"ププリン":174,"トゲピー":175,"トゲチック":176,"ネイティ":177,"ネイティオ":178,"メリープ":179,"モココ":180,"デンリュウ":181,"キレイハナ":182,"マリル":183,"マリルリ":184,"ウソッキー":185,"ニョロトノ":186,"ハネッコ":187,"ポポッコ":188,"ワタッコ":189,"エイパム":190,"ヒマナッツ":191,"キマワリ":192,"ヤンヤンマ":193,"ウパー":194,"ヌオー":195,"エーフィ":196,"ブラッキー":197,"ヤミカラス":198,"ヤドキング":199,"ムウマ":200,"アンノーン":201,"ソーナンス":202,"キリンリキ":203,"クヌギダマ":204,"フォレトス":205,"ノコッチ":206,"グライガー":207,"ハガネール":208,"ブルー":209,"グランブル":210,"ハリーセン":211,"ハッサム":212,"ツボツボ":213,"ヘラクロス":214,"ニューラ":215,"ヒメグマ":216,"リングマ":217,"マグマッグ":218,"マグカルゴ":219,"ウリムー":220,"イノムー":221,"サニーゴ":222,"テッポウオ":223,"オクタン":224,"デリバード":225,"マンタイン":226,"エアームド":227,"デルビル":228,"ヘルガー":229,"キングドラ":230,"ゴマゾウ":231,"ドンファン":232,"ポリゴン2":233,"オドシシ":234,"ドーブル":235,"バルキー":236,"カポエラー":237,"ムチュール":238,"エレキッド":239,"ブビィ":240,"ミルタンク":241,"ハピナス":242,"ライコウ":243,"エンテイ":244,"スイクン":245,"ヨーギラス":246,"サナギラス":247,"バンギラス":248,"ルギア":249,"ホウオウ":250,"セレビィ":251,"キモリ":252,"ジュプトル":253,"ジュカイン":254,"アチャモ":255,"ワカシャモ":256,"バシャーモ":257,"ミズゴロウ":258,"ヌマクロー":259,"ラグラージ":260,"ポチエナ":261,"グラエナ":262,"ジグザグマ":263,"マッスグマ":264,"ケムッソ":265,"カラサリス":266,"アゲハント":267,"マユルド":268,"ドクケイル":269,"ハスボー":270,"ハスブレロ":271,"ルンパッパ":272,"タネボー":273,"コノハナ":274,"ダーテング":275,"スバメ":276,"オオスバメ":277,"キャモメ":278,"ペリッパー":279,"ラルトス":280,"キルリア":281,"サーナイト":282,"アメタマ":283,"アメモース":284,"キノココ":285,"キノガッサ":286,"ナマケロ":287,"ヤルキモノ":288,"ケッキング":289,"ツチニン":290,"テッカニン":291,"ヌケニン":292,"ゴニョニョ":293,"ドゴーム":294,"バクオング":295,"マクノシタ":296,"ハリテヤマ":297,"ルリリ":298,"ノズパス":299,"エネコ":300,"エネコロロ":301,"ヤミラミ":302,"クチート":303,"ココドラ":304,"コドラ":305,"ボスゴドラ":306,"アサナン":307,"チャーレム":308,"ラクライ":309,"ライボルト":310,"プラスル":311,"マイナン":312,"バルビート":313,"イルミーゼ":314,"ロゼリア":315,"ゴクリン":316,"マルノーム":317,"キバニア":318,"サメハダー":319,"ホエルコ":320,"ホエルオー":321,"ドンメル":322,"バクーダ":323,"コータス":324,"バネブー":325,"ブーピッグ":326,"パッチール":327,"ナックラー":328,"ビブラーバ":329,"フライゴン":330,"サボネア":331,"ノクタス":332,"チルット":333,"チルタリス":334,"ザングース":335,"ハブネーク":336,"ルナトーン":337,"ソルロック":338,"ドジョッチ":339,"ナマズン":340,"ヘイガニ":341,"シザリガー":342,"ヤジロン":343,"ネンドール":344,"リリーラ":345,"ユレイドル":346,"アノプス":347,"アーマルド":348,"ヒンバス":349,"ミロカロス":350,"カクレオン":352,"カゲボウズ":353,"ジュペッタ":354,"ヨマワル":355,"サマヨール":356,"トロピウス":357,"チリーン":358,"アブソル":359,"ソーナノ":360,"ユキワラシ":361,"オニゴーリ":362,"タマザラシ":363,"トドグラー":364,"トドゼルガ":365,"パールル":366,"ハンテール":367,"サクラビス":368,"ジーランス":369,"ラブカス":370,"タツベイ":371,"コモルー":372,"ボーマンダ":373,"ダンバル":374,"メタング":375,"メタグロス":376,"レジロック":377,"レジアイス":378,"レジスチル":379,"ラティアス":380,"ラティオス":381,"レックウザ":384,"ジラーチ":385,"デオキシス":386,"ナエトル":387,"ハヤシガメ":388,"ドダイトス":389,"ヒコザル":390,"モウカザル":391,"ゴウカザル":392,"ポッチャマ":393,"ポッタイシ":394,"エンペルト":395,"ムックル":396,"ムクバード":397,"ムクホーク":398,"ビッパ":399,"ビーダル":400,"コロボーシ":401,"コロトック":402,"コリンク":403,"ルクシオ":404,"レントラー":405,"スボミー":406,"ロズレイド":407,"ズガイドス":408,"ラムパルド":409,"タテトプス":410,"トリデプス":411,"ミノムッチ":412,"ガーメイル":414,"ミツハニー":415,"ビークイン":416,"パチリス":417,"ブイゼル":418,"フローゼル":419,"チェリンボ":420,"チェリム":421,"カラナクシ":422,"トリトドン":423,"エテボース":424,"フワンテ":425,"フワライド":426,"ミミロル":427,"ミミロップ":428,"ムウマージ":429,"ドンカラス":430,"ニャルマー":431,"ブニャット":432,"リーシャン":433,"スカンプー":434,"スカタンク":435,"ドーミラー":436,"ドータクン":437,"ウソハチ":438,"マネネ":439,"ピンプク":440,"ペラップ":441,"ミカルゲ":442,"フカマル":443,"ガバイト":444,"ガブリアス":445,"ゴンベ":446,"リオル":447,"ルカリオ":448,"ヒポポタス":449,"カバルドン":450,"スコルピ":451,"ドラピオン":452,"グレッグル":453,"ドクロッグ":454,"マスキッパ":455,"ケイコウオ":456,"ネオラント":457,"タマンタ":458,"ユキカブリ":459,"ユキノオー":460,"マニューラ":461,"ジバコイル":462,"ベロベルト":463,"ドサイドン":464,"モジャンボ":465,"エレキブル":466,"ブーバーン":467,"トゲキッス":468,"メガヤンマ":469,"リーフィア":470,"グレイシア":471,"グライオン":472,"マンムー":473,"ポリゴンZ":474,"エルレイド":475,"ダイノーズ":476,"ヨノワール":477,"ユキメノコ":478,"ユクシー":480,"エムリット":481,"アグノム":482,"ディアルガ":483,"パルキア":484,"ヒードラン":485,"レジギガス":486,"ギラティナ":487,"クレセリア":488,"フィオネ":489,"マナフィ":490,"ダークライ":491,"アルセウス":493,"ビクティニ":494,"ツタージャ":495,"ジャノビー":496,"ジャローダ":497,"ポカブ":498,"チャオブー":499,"エンブオー":500,"ミジュマル":501,"フタチマル":502,"ダイケンキ":503,"ミネズミ":504,"ミルホッグ":505,"ヨーテリー":506,"ハーデリア":507,"ムーランド":508,"チョロネコ":509,"レパルダス":510,"ヤナップ":511,"ヤナッキー":512,"バオップ":513,"バオッキー":514,"ヒヤップ":515,"ヒヤッキー":516,"ムンナ":517,"ムシャーナ":518,"マメパト":519,"ハトーボー":520,"ケンホロウ":521,"シママ":522,"ゼブライカ":523,"ダンゴロ":524,"ガントル":525,"ギガイアス":526,"コロモリ":527,"ココロモリ":528,"モグリュー":529,"ドリュウズ":530,"タブンネ":531,"ドッコラー":532,"ドテッコツ":533,"ローブシン":534,"オタマロ":535,"ガマガル":536,"ガマゲロゲ":537,"ナゲキ":538,"ダゲキ":539,"クルミル":540,"クルマユ":541,"ハハコモリ":542,"フシデ":543,"ホイーガ":544,"ペンドラー":545,"モンメン":546,"エルフーン":547,"チュリネ":548,"ドレディア":549,"バスラオ":550,"メグロコ":551,"ワルビル":552,"ワルビアル":553,"ダルマッカ":554,"ヒヒダルマ":555,"マラカッチ":556,"イシズマイ":557,"イワパレス":558,"ズルッグ":559,"ズルズキン":560,"シンボラー":561,"デスマス":562,"デスカーン":563,"プロトーガ":564,"アバゴーラ":565,"アーケン":566,"アーケオス":567,"ヤブクロン":568,"ダストダス":569,"ゾロア":570,"ゾロアーク":571,"チラーミィ":572,"チラチーノ":573,"ゴチム":574,"ゴチミル":575,"ゴチルゼル":576,"ユニラン":577,"ダブラン":578,"ランクルス":579,"コアルヒー":580,"スワンナ":581,"バニプッチ":582,"バニリッチ":583,"バイバニラ":584,"シキジカ":585,"メブキジカ":586,"エモンガ":587,"カブルモ":588,"シュバルゴ":589,"タマゲタケ":590,"モロバレル":591,"プルリル":592,"ブルンゲル":593,"ママンボウ":594,"バチュル":595,"デンチュラ":596,"テッシード":597,"ナットレイ":598,"ギアル":599,"ギギアル":600,"ギギギアル":601,"シビシラス":602,"シビビール":603,"シビルドン":604,"リグレー":605,"オーベム":606,"ヒトモシ":607,"ランプラー":608,"シャンデラ":609,"キバゴ":610,"オノンド":611,"オノノクス":612,"クマシュン":613,"ツンベアー":614,"フリージオ":615,"チョボマキ":616,"アギルダー":617,"マッギョ":618,"コジョフー":619,"コジョンド":620,"クリムガン":621,"ゴビット":622,"ゴルーグ":623,"コマタナ":624,"キリキザン":625,"バッフロン":626,"ワシボン":627,"ウォーグル":628,"バルチャイ":629,"バルジーナ":630,"クイタラン":631,"アイアント":632,"モノズ":633,"ジヘッド":634,"サザンドラ":635,"メラルバ":636,"ウルガモス":637,"コバルオン":638,"テラキオン":639,"ビリジオン":640,"トルネロス":641,"ボルトロス":642,"レシラム":643,"ゼクロム":644,"ランドロス":645,"キュレム":646,"ケルディオ":647,"ゲノセクト":649,"ハリマロン":650,"ハリボーグ":651,"ブリガロン":652,"フォッコ":653,"テールナー":654,"マフォクシー":655,"ケロマツ":656,"ゲコガシラ":657,"ゲッコウガ":658,"ホルビー":659,"ホルード":660,"ヤヤコマ":661,"ヒノヤコマ":662,"ファイアロー":663,"コフキムシ":664,"コフーライ":665,"ビビヨン":666,"シシコ":667,"カエンジシ":668,"フラベベ":669,"フラエッテ":670,"フラージェス":671,"メェークル":672,"ゴーゴート":673,"ヤンチャム":674,"ゴロンダ":675,"トリミアン":676,"ニャスパー":677,"ニャオニクス":678,"ヒトツキ":679,"ニダンギル":680,"ギルガルド":681,"シュシュプ":682,"フレフワン":683,"ペロッパフ":684,"ペロリーム":685,"マーイーカ":686,"カラマネロ":687,"カメテテ":688,"ガメノデス":689,"クズモー":690,"ドラミドロ":691,"ウデッポウ":692,"ブロスター":693,"エリキテル":694,"エレザード":695,"チゴラス":696,"ガチゴラス":697,"アマルス":698,"アマルルガ":699,"ニンフィア":700,"ルチャブル":701,"デデンネ":702,"メレシー":703,"ヌメラ":704,"ヌメイル":705,"ヌメルゴン":706,"クレッフィ":707,"ボクレー":708,"オーロット":709,"バケッチャ":710,"パンプジン":711,"カチコール":712,"クレベース":713,"オンバット":714,"オンバーン":715,"ゼルネアス":716,"イベルタル":717,"ジガルデ":718,"ディアンシー":719,"ボルケニオン":721,"モクロー":722,"フクスロー":723,"ジュナイパー":724,"ニャビー":725,"ニャヒート":726,"ガオガエン":727,"アシマリ":728,"オシャマリ":729,"アシレーヌ":730,"ツツケラ":731,"ケララッパ":732,"ドデカバシ":733,"ヤングース":734,"デカグース":735,"アゴジムシ":736,"デンヂムシ":737,"クワガノン":738,"マケンカニ":739,"ケケンカニ":740,"アブリー":742,"アブリボン":743,"イワンコ":744,"ルガルガン":745,"ヨワシ":746,"ヒドイデ":747,"ドヒドイデ":748,"ドロバンコ":749,"バンバドロ":750,"シズクモ":751,"オニシズクモ":752,"カリキリ":753,"ラランテス":754,"ネマシュ":755,"マシェード":756,"ヤトウモリ":757,"エンニュート":758,"ヌイコグマ":759,"キテルグマ":760,"アマカジ":761,"アママイコ":762,"アマージョ":763,"キュワワー":764,"ヤレユータン":765,"ナゲツケサル":766,"コソクムシ":767,"グソクムシャ":768,"スナバァ":769,"シロデスナ":770,"ナマコブシ":771,"タイプ:ヌル":772,"シルヴァディ":773,"メテノ":774,"ネッコアラ":775,"バクガメス":776,"トゲデマル":777,"ミミッキュ":778,"ハギギシリ":779,"ジジーロン":780,"ダダリン":781,"ジャラコ":782,"ジャランゴ":783,"ジャラランガ":784,"カプ・コケコ":785,"カプ・テテフ":786,"カプ・ブルル":787,"カプ・レヒレ":788,"コスモッグ":789,"コスモウム":790,"ソルガレオ":791,"ルナアーラ":792,"ウツロイド":793,"マッシブーン":794,"フェローチェ":795,"デンジュモク":796,"テッカグヤ":797,"カミツルギ":798,"アクジキング":799,"ネクロズマ":800,"マギアナ":801,"マーシャドー":802,"ベベノム":803,"アーゴヨン":804,"ツンデツンデ":805,"ズガドーン":806,"ゼラオラ":807,"メルタン":808,"メルメタル":809,"サルノリ":810,"バチンキー":811,"ゴリランダー":812,"ヒバニー":813,"ラビフット":814,"エースバーン":815,"メッソン":816,"ジメレオン":817,"インテレオン":818,"ホシガリス":819,"ヨクバリス":820,"ココガラ":821,"アオガラス":822,"アーマーガア":823,"サッチムシ":824,"レドームシ":825,"イオルブ":826,"クスネ":827,"フォクスライ":828,"ヒメンカ":829,"ワタシラガ":830,"ウールー":831,"バイウールー":832,"カムカメ":833,"カジリガメ":834,"ワンパチ":835,"パルスワン":836,"タンドン":837,"トロッゴン":838,"セキタンザン":839,"カジッチュ":840,"アップリュー":841,"タルップル":842,"スナヘビ":843,"サダイジャ":844,"ウッウ":845,"サシカマス":846,"カマスジョー":847,"エレズン":848,"ストリンダー":849,"ヤクデ":850,"マルヤクデ":851,"タタッコ":852,"オトスパス":853,"ヤバチャ":854,"ポットデス":855,"ミブリム":856,"テブリム":857,"ブリムオン":858,"ベロバー":859,"ギモー":860,"オーロンゲ":861,"タチフサグマ":862,"ニャイキング":863,"サニゴーン":864,"ネギガナイト":865,"バリコオル":866,"デスバーン":867,"マホミル":868,"マホイップ":869,"タイレーツ":870,"バチンウニ":871,"ユキハミ":872,"モスノウ":873,"イシヘンジン":874,"コオリッポ":875,"イエッサン":876,"モルペコ":877,"ゾウドウ":878,"ダイオウドウ":879,"パッチラゴン":880,"パッチルドン":881,"ウオノラゴン":882,"ウオチルドン":883,"ジュラルドン":884,"ドラメシヤ":885,"ドロンチ":886,"ドラパルト":887,"ムゲンダイナ":890,"ダクマ":891,"ザルード":893,"レジエレキ":894,"レジドラゴ":895,"ブリザポス":896,"レイスポス":897,"バドレックス":898,"アヤシシ":899,"バサギリ":900,"ガチグマ":901,"イダイトウ":902,"オオニューラ":903,"ハリーマン":904,"ラブトロス":905,"ニャオハ":906,"ニャローテ":907,"マスカーニャ":908,"ホゲータ":909,"アチゲータ":910,"ラウドボーン":911,"クワッス":912,"ウェルカモ":913,"ウェーニバル":914,"グルトン":915,"パフュートン":916,"タマンチュラ":917,"ワナイダー":918,"マメバッタ":919,"エクスレッグ":920,"パモ":921,"パモット":922,"パーモット":923,"ワッカネズミ":924,"イッカネズミ":925,"パピモッチ":926,"バウッツェル":927,"ミニーブ":928,"オリーニョ":929,"オリーヴァ":930,"イキリンコ":931,"コジオ":932,"ジオヅム":933,"キョジオーン":934,"カルボウ":935,"グレンアルマ":936,"ソウブレイズ":937,"ズピカ":938,"ハラバリー":939,"カイデン":940,"タイカイデン":941,"オラチフ":942,"マフィティフ":943,"シルシュルー":944,"タギングル":945,"アノクサ":946,"アノホラグサ":947,"ノノクラゲ":948,"リククラゲ":949,"ガケガニ":950,"カプサイジ":951,"スコヴィラン":952,"シガロコ":953,"ベラカス":954,"ヒラヒナ":955,"クエスパトラ":956,"カヌチャン":957,"ナカヌチャン":958,"デカヌチャン":959,"ウミディグダ":960,"ウミトリオ":961,"オトシドリ":962,"ナミイルカ":963,"イルカマン":964,"ブロロン":965,"ブロロローム":966,"モトトカゲ":967,"ミミズズ":968,"キラーメ":969,"キラフロル":970,"ボチ":971,"ハカドッグ":972,"カラミンゴ":973,"アルクジラ":974,"ハルクジラ":975,"ミガルーサ":976,"ヘイラッシャ":977,"シャリタツ":978,"コノヨザル":979,"ドオー":980,"リキキリン":981,"ノココッチ":982,"ドドゲザン":983,"イダイナキバ":984,"サケブシッポ":985,"アラブルタケ":986,"ハバタクカミ":987,"チヲハウハネ":988,"スナノケガワ":989,"テツノワダチ":990,"テツノツツミ":991,"テツノカイナ":992,"テツノコウベ":993,"テツノドクガ":994,"テツノイバラ":995,"セビエ":996,"セゴール":997,"セグレイブ":998,"コレクレー":999,"サーフゴー":1000,"チオンジェン":1001,"パオジアン":1002,"ディンルー":1003,"イーユイ":1004,"トドロクツキ":1005,"テツノブジン":1006,"コライドン":1007,"ミライドン":1008,"ウネルミナモ":1009,"テツノイサハ":1010,"カミッチュ":1011,"チャデス":1012,"ヤバソチャ":1013,"イイネイヌ":1014,"マシマシラ":1015,"キチキギス":1016,"ブリジュラス":1018,"カミツオロチ":1019,"ウガツホムラ":1020,"タケルライコ":1021,"テツノイワオ":1022,"テツノカシラ":1023,"テラパゴス":1024,"モモワロウ":1025,
  };

  // 図鑑用
  const pad4 = n => String(n).padStart(4, '0');

  // 特例用：すがたがないので、一覧表示
  const searchLinkNames = new Set([
    "オーガポン", "メロエッタ", "ザマゼンタ","ミノマダム","カイオーガ","グラードン","オドリドリ"
  ]);


  // 特例用：すがたが無いので
  const specialLinkByName = {
    "オーガポン": "https://zukan.pokemon.co.jp/?word=%E3%82%AA%E3%83%BC%E3%82%AC%E3%83%9D%E3%83%B3"
  };

  // ▼ 追加：DOM参照
  const freqDiv = document.getElementById('freq');

  // ▼ 追加：頻出文字を集計して表示
  function renderFreq(words) {
    if (!words.length) {
      freqDiv.textContent = '頻出文字: なし';
      return;
    }
    // ひらカナ同一視ONならカタカナに正規化してカウント
    const map = new Map(); // char -> count
    for (const w0 of words) {
      const w = caseFold.checked ? toKatakana(w0) : w0;
      for (const ch of Array.from(w)) {
        map.set(ch, (map.get(ch) || 0) + 1);
      }
    }
    // 出現数で降順ソート
    const sorted = [...map.entries()].sort((a, b) => b[1] - a[1]);
    const top = sorted[0];
    // 上位をチップ表示（上位5件）
    freqDiv.innerHTML = `頻出文字: <strong>${top[0]}</strong>（${top[1]}回）　|　上位: ` +
      sorted.slice(0, 5).map(([ch, n]) => `<span class="chip">${ch} × ${n}</span>`).join(' ');
  }

  // ひらがな⇔カタカナの単純同一視
  const toKatakana = (str) => str.replace(/[\u3041-\u3096]/g, (m) =>
    String.fromCharCode(m.charCodeAt(0) + 0x60)
  );
  const norm = (s) => (s ?? "").trim();

  // テキストエリアを「1文字ずつ」配列化（空白無視・重複排除・ひら/カナ同一視オプション）
  function parseCharsFromTextarea(el) {
    const raw = el.value ?? "";
    const chars = Array.from(raw).filter(ch => !/\s/.test(ch));
    const uniq = [...new Set(chars)];
    return caseFold.checked ? uniq.map(toKatakana) : uniq;
  }

  // 禁止文字（各文字がNG）
  function parseBans() {
    return parseCharsFromTextarea(banArea);
  }

  // 含める（必須）文字（各文字をすべて含むこと）
  function parseIncludes() {
    return parseCharsFromTextarea(includeArea);
  }

  function matchesPosition(word, patternChars, bans, includes) {
    const w = norm(word);
    if (only5.checked && w.length !== 5) return false;

    const ww = caseFold.checked ? toKatakana(w) : w;

    // 位置一致チェック（未入力はワイルドカード）
    for (let i = 0; i < 5; i++) {
      const pc = patternChars[i];
      if (!pc) continue;
      const p = caseFold.checked ? toKatakana(pc) : pc;
      if (ww[i] !== p) return false;
    }

    // 禁止：いずれか1文字でも含んだら除外
    for (const b of bans) {
      if (b && ww.includes(b)) return false;
    }

    // 必須：すべての文字を含むこと
    for (const inc of includes) {
      if (inc && !ww.includes(inc)) return false;
    }

    return true;
  }

  function currentPattern() {
    return posInputs.map(inp => norm(inp.value).slice(0, 1));
  }

  function render() {
    const pattern = currentPattern();
    const bans = parseBans();
    const includes = parseIncludes();

    const filtered = data.filter(word => matchesPosition(word, pattern, bans, includes));

    // 表示
    resultList.innerHTML = '';
    if (filtered.length === 0) {
      resultList.innerHTML = `<div class="muted">該当なし</div>`;
    } else {
      for (const w of filtered) {
        const div = document.createElement('div');
        div.className = 'chip';

        const id = dexByName[w]; // 名前→図鑑番号（存在する場合のみリンク化）
        let url = null;
        if (searchLinkNames.has(w)) {
          // 指定名は「?word=名前」の検索リンクを優先
          url = `https://zukan.pokemon.co.jp/?word=${encodeURIComponent(w)}`;
        } else if (id != null) {
          // それ以外は図鑑番号があれば /detail/XXXX
          url = `https://zukan.pokemon.co.jp/detail/${pad4(id)}`;
        }

        const a = document.createElement('a');
        a.href = url;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = w;
        div.appendChild(a);

        resultList.appendChild(div);
      }
    }

    const cond = [];
    pattern.forEach((c, idx) => { if (c) cond.push(`${idx+1}文字目=${c}`); });
    <!--      if (only5.checked) cond.push('5文字限定');-->
    <!--      if (caseFold.checked) cond.push('ひらカナ同一視');-->
    if (includes.length) cond.push(`必須=${includes.join(' ')}`);
    if (bans.length) cond.push(`禁止=${bans.join(' ')}`);

    summary.textContent = `条件: ${cond.length ? cond.join(' / ') : '指定なし'}　|　ヒット: ${filtered.length} / ${data.length}`;

    // 頻出文字
    renderFreq(filtered);
  }

  // 入力イベント
  let t;
  function scheduleRender() { clearTimeout(t); t = setTimeout(render, 50); }

  posInputs.forEach(inp => {
    inp.addEventListener('input', (e) => {
      if (e.target.value.length > 1) e.target.value = e.target.value.slice(0, 1);
      scheduleRender();
    });
  });
  [only5, caseFold].forEach(el => el.addEventListener('change', render));
  banArea.addEventListener('input', scheduleRender);
  includeArea.addEventListener('input', scheduleRender);

  // クリア（非表示だが機能は残す）
  clearBtn?.addEventListener('click', () => {
    posInputs.forEach(inp => inp.value = '');
    banArea.value = '';
    includeArea.value = '';
    render();
  });

  // 初期設定
  banArea.value = '';      // 禁止文字列
  includeArea.value = '';  // 含む文字列
  render();
</script>
</body>
</html>
