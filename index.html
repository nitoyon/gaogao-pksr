<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ポケスリWeb - 料理必要食材計算</title>

    <link href="style.css" rel="stylesheet">

</head>
<body>

<div class="container">
    <div class="dish-image">料理の画像</div>
    <div class="category-select">
        <label>カテゴリ選択:</label>
        <select id="categorySelect">
            <option value="">-- カテゴリを選択 --</option>
            <option value="サラダ">サラダ</option>
            <option value="カレー">カレー</option>
            <option value="デザート">デザート</option>
        </select>
    </div>
    <div class="food-select">
        <label>料理選択:</label>
        <select id="foodSelect">
            <option value="">-- 料理を選択 --</option>
        </select>
    </div>
    <table id="ingredientTable">
        <thead>
            <tr>
                <th>食材</th>
                <th>1食</th>
                <th>3食</th>
                <th>15食</th>
                <th>21食</th>
            </tr>
        </thead>
        <tbody>
            <!-- 食材データがここに挿入されます -->
        </tbody>
        <tfoot>
            <tr class="total-row">
                <td>合計</td>
                <td id="total1">0</td>
                <td id="total3">0</td>
                <td id="total15">0</td>
                <td id="total21">0</td>
            </tr>
        </tfoot>
    </table>
</div>

<script src="dishes.js"></script>

<script>

    const categorySelect = document.getElementById('categorySelect');
    const foodSelect = document.getElementById('foodSelect');
    const ingredientTableBody = document.querySelector('#ingredientTable tbody');
    const total1 = document.getElementById('total1');
    const total3 = document.getElementById('total3');
    const total15 = document.getElementById('total15');
    const total21 = document.getElementById('total21');

    // カテゴリ選択時に料理選択を更新
    categorySelect.addEventListener('change', function() {
        const selectedCategory = categorySelect.value;
        foodSelect.innerHTML = '<option value="">-- 料理を選択 --</option>';

        if (selectedCategory && dishes[selectedCategory]) {
            // 選択されたカテゴリに属する料理をfoodSelectに追加
            for (const dish in dishes[selectedCategory]) {
                const option = document.createElement('option');
                option.value = dish;
                option.textContent = dish;
                foodSelect.appendChild(option);
            }
        }
        // 料理選択が変更された場合は食材リストを初期化
        updateIngredients();
    });

    // 必要食材リストを更新
    foodSelect.addEventListener('change', updateIngredients);

    function updateIngredients() {
        const selectedCategory = categorySelect.value;
        const selectedDish = foodSelect.value;

        ingredientTableBody.innerHTML = ""; // テーブルの内容を初期化
        let sum1 = 0, sum3 = 0, sum15 = 0, sum21 = 0;

        if (selectedCategory && selectedDish && dishes[selectedCategory] && dishes[selectedCategory][selectedDish]) {
            const ingredients = dishes[selectedCategory][selectedDish];

            for (const [ingredient, amount] of Object.entries(ingredients)) {
                const row = document.createElement('tr');
                const amount1 = amount;
                const amount3 = amount * 3;
                const amount15 = amount * 15;
                const amount21 = amount * 21;

                sum1 += amount1;
                sum3 += amount3;
                sum15 += amount15;
                sum21 += amount21;

                row.innerHTML = `
                    <td>${ingredient}</td>
                    <td>${amount1}</td>
                    <td>${amount3}</td>
                    <td>${amount15}</td>
                    <td>${amount21}</td>
                `;
                ingredientTableBody.appendChild(row);
            }
        }

        // 合計の表示を更新
        total1.textContent = sum1;
        total3.textContent = sum3;
        total15.textContent = sum15;
        total21.textContent = sum21;
    }

    // 初期表示の設定
    updateIngredients();
</script>

</body>
</html>
